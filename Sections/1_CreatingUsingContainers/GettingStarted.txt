Section 1

Getting started with Docker, Docker images, and Docker containers

Simple commands

    $ docker version
    $ docker info
    $ docker --help
    $ docker container run
    $ docker run (old)
    $ docker

Images vs Containers

    Images, application we want to run
    Containers, an instance of that images running

    // Launches an NginX server
    $ docker container run --publish 80:80 nginx
    $ curl http://localhost

    $ docker container ls
    $ docker container stop [container i.d.]

    // Detach the logs from shell window
    // Traffic is -> port 80 host -> 80 container
    $ docker container run --publish 80:80 --detach --name webhost nginx
    $ docker container logs webhost

    // Removing and force removing containers
    $ docker container rm [ID] [ID] [ID]
    $ docker container rm -f [ID] [ID] [ID]
    $ docker container ls -a

Containers are "Restricted Processes" not a VM

    $ docker run --name mongo -d mongo
    $ docker top mongo
    $ docker ps mongo
    $ ps aux | grep mongo
    $ docker stop mongo

Process Monitoring - What's going on in Containers CLI

  Command to know:

    Process list on container
    # docker container top

    Details of one container config
    # docker container inspect

    Performance stats for all containers
    # docker container stats

Getting a Shell Inside a Container : No SSH

  Start new container interactively
  # docker container run -it

  Run additional command in existing containers
  # docker container exec -it

  Note: Different Linux distro in containers

  Example of running different types of images
  # docker container run -it --name proxy nginx bash

  # docker container run -it --ubuntu ubuntu

  NOTE: Exit will stop the container running because of the
  way it was lunched.

  Running the container after exiting

  # docker start -ai [Container name]

  Enter a container that is runnning

  # docker container exec -it mysql bash

  Using alpine image

  # docker container pull alpine

  # docker container image

  # docker container run -it alpine bash

  CAUTION: This will cause an error. Alpine is too small of
  an image to handle a shell, however we can try something
  else.

  # docker container run -it alpine sh

  Review:

  # docker container run -it
  # docker container exec -it
  - Different Linux distros in containers


Docker Networks : Concepts for Private and Public Coms in containers

  - Review of docker container run -p
  - For local dev/testing, Networks
  - Port check with # docker container port <container>
  - Understand how network packets move around Docker

  Docker Network Defaults

  - Each container connected to a private virtual network "bridge"
  - Each virtual network routes through NAT firewall on host IP
  - All container on a virtual network can talk to each other without -p
  - Best practice is to create a new virtual network for each app:
    - network 'my_web_app' for mysql and php/apache Containers
    - network 'my_api' for mongo and node.js containers

    Docker Networks contin...

      - 'Batteries Included and Removable'
        - Defaults work well in many cases, but easy to swap
        out parts to customize it.
      - Make new virtual network
      - Attach container to more then one virtual network (or none)
      - Skip virtual network and use host IP (--net=host)
      - Use different Docker network driver to gain new abilities

    Let's run a webhost on nginx to start

    # docker container run -p 80:80 --name webhost -d nginx

    Check the port forwarding

    # docker container port webhost

FIXME: Change In Official Nginx Image Removes Ping

  Anywhere I do a docker container run <stuff> nginx , where nginx  is the
  image you should use, replace that with nginx:alpine,
  which still has ping command in it.


Docker Networks: CLI Management of Virtual Networks

Docker Networks: DNS and How Containers Find Each Other

Assignment: Using Containers for CLI Testing

Assignment Answers: Using Containers for CLI Testing

 Assignment: DNS Round Robin Test

 Assignment Answers: DNS Round Robin Test
